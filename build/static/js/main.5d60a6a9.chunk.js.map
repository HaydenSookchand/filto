{"version":3,"sources":["images/add.png","images/original.png","images/blur.png","images/sepia.png","images/vintage.png","App.js","index.js"],"names":["App","useState","canvas","setCanvas","image","setImage","setFilter","useEffect","initCanvas","addImageToCanvas","fabric","Canvas","height","width","margin","backgroundColor","lockCanvas","selection","forEachObject","o","selectable","photo","document","getElementById","imgInstance","Image","scaleToHeight","scaleToWidth","_objects","add","downloadImage","format","toDataURL","replace","link","createElement","download","href","click","addFilter","userFilter","imageFilter","filters","Grayscale","Blur","blur","Sepia","Vintage","applyFilters","renderAll","push","alert","className","id","type","onChange","event","target","files","reader","FileReader","onload","e","URL","createObjectURL","setTimeout","readAsDataURL","style","display","alt","src","onClick","original","sepia","vintage","addButton","strength","parseFloat","value","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5d60a6a9.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/add.982d5be3.png\";","export default __webpack_public_path__ + \"static/media/original.f00fdf72.png\";","export default __webpack_public_path__ + \"static/media/blur.580bb185.png\";","export default __webpack_public_path__ + \"static/media/sepia.ad2b3655.png\";","export default __webpack_public_path__ + \"static/media/vintage.c601c788.png\";","import React, { useState, useEffect } from \"react\";\nimport { fabric } from \"fabric\";\nimport addButton from \"./images/add.png\";\nimport original from \"./images/original.png\";\nimport blur from \"./images/blur.png\";\nimport sepia from \"./images/sepia.png\";\nimport vintage from \"./images/vintage.png\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [canvas, setCanvas] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [filter, setFilter] = useState(false);\n\n  useEffect(() => {\n    setCanvas(initCanvas());\n  }, []);\n\n  useEffect(() => {\n    addImageToCanvas();\n  }, [image]);\n\n  const initCanvas = () =>\n    new fabric.Canvas(\"canvas\", {\n      height: 250,\n      width: 250,\n      margin: 300,\n      backgroundColor: \"black\"\n    });\n\n  const openFile = () => {\n    var openButton = document.getElementById(\"uploadButton\");\n    openButton.click();\n  };\n\n  const onImageChange = event => {\n    if (event.target.files && event.target.files[0]) {\n      let reader = new FileReader();\n      reader.onload = e => {\n        setImage(URL.createObjectURL(event.target.files[0]));\n        setTimeout(() => {\n          addImageToCanvas();\n          lockCanvas();\n        }, 500);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n    }\n  };\n\n  // locks items on canvas\n  const lockCanvas = () => {\n    if (canvas) {\n      canvas.selection = false;\n      canvas.forEachObject(function(o) {\n        o.selectable = false;\n      });\n    }\n  };\n\n  // locks add images on canvas\n  const addImageToCanvas = () => {\n    let photo = document.getElementById(\"target\");\n    var imgInstance = new fabric.Image(photo);\n    imgInstance.scaleToHeight(250);\n    imgInstance.scaleToWidth(250);\n    if (canvas) {\n      canvas._objects = []; //remove other image from canvas\n      canvas.add(imgInstance);\n    }\n  };\n\n  function downloadImage(format) {\n    if (canvas) {\n      var image = canvas\n        .toDataURL({\n          format: format\n        })\n        .replace(\"image/\" + format, \"image/octet-stream\");\n      var link = document.createElement(\"a\");\n      link.download = \"filto.\" + format;\n      link.href = image;\n      link.click();\n    }\n  }\n\n  const addFilterStrength = e => {\n    let image = canvas._objects[0]; // clean up magic number\n    let strength = parseFloat(e.target.value);\n    image.filters[0][\"blur\"] = strength;\n    image.applyFilters();\n    canvas.renderAll();\n  };\n\n  const addFilter = userFilter => {\n    let imageFilter = \"\";\n    let image = canvas._objects[0]; // clean up magic number\n\n    // turn into a switch\n    if (image) {\n      image.filters = [];\n\n      if (userFilter === \"greyscale\") {\n        imageFilter = new fabric.Image.filters.Grayscale();\n      }\n\n      if (userFilter === \"blur\") {\n        imageFilter = new fabric.Image.filters.Blur({\n          blur: 0.5\n        });\n      }\n\n      if (userFilter === \"sepia\") {\n        imageFilter = new fabric.Image.filters.Sepia();\n      }\n\n      if (userFilter === \"vintage\") {\n        imageFilter = new fabric.Image.filters.Vintage();\n      }\n\n      if (userFilter === \"original\") {\n        image.filters = [];\n        image.applyFilters();\n        canvas.renderAll();\n      }\n\n      if (imageFilter) {\n        setFilter(true);\n        image.filters.push(imageFilter);\n        image.applyFilters();\n        canvas.renderAll();\n      }\n    } else {\n      alert(\"Please add an Image\");\n    }\n  };\n\n  return (\n    <div className=\"content\">\n      <div className=\"header\"> Filto </div>\n\n      <canvas id=\"canvas\" />\n\n      <div className=\"file-button-container\">\n        <input\n          type=\"file\"\n          onChange={onImageChange}\n          className=\"uploadButton\"\n          id=\"uploadButton\"\n          style={{ display: \"none\" }}\n        />\n      </div>\n\n      <img\n        alt=\"uploadedimage\"\n        style={{ display: \"none\" }}\n        id=\"target\"\n        src={image}\n      />\n\n      <div className=\"controls\">\n        <img\n          onClick={() => addFilter(\"original\")}\n          src={original}\n          className=\"filterButton\"\n        />\n\n        <img\n          onClick={() => addFilter(\"blur\")}\n          src={blur}\n          className=\"filterButton\"\n        />\n\n        <img\n          onClick={() => addFilter(\"sepia\")}\n          src={sepia}\n          className=\"filterButton\"\n        />\n\n        <img\n          onClick={() => addFilter(\"vintage\")}\n          src={vintage}\n          className=\"filterButton\"\n        />\n\n        <img onClick={openFile} src={addButton} className=\"filterButton\" />\n      </div>\n\n      <select id=\"myList\" onChange={addFilterStrength}>\n        <option> Blur Filter Strength </option>\n        <option> 0 </option>\n        <option> 0.2 </option>\n        <option> 0.5 </option>\n        <option> 1 </option>\n      </select>\n      <button onClick={() => downloadImage(\"png\")}>Download PNG</button>\n      <button onClick={() => downloadImage(\"jpeg\")}>Download JPG</button>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}